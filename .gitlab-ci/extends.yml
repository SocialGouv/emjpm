#

.base_yarn_workspace_install:
  extends: .prepare_stage
  image: node:12-alpine
  interruptible: true
  script:
    - "[[ type jq ]] || apk add jq=~1"

    # NOTE(dougladuteil): remove dependencies and devDependencies
    # As we only install one package, we do not need the cross packages dependencies
    # like lerna or husky...
    - "{ rm package.json; jq 'del(.dependencies) | del(.devDependencies)' > package.json; } < package.json"

    - yarn config set cache-folder $CI_PROJECT_DIR/.yarn
    - yarn --frozen-lockfile
